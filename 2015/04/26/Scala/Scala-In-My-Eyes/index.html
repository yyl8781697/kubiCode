
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>我眼中的Scala-简洁不简单 | Kubi Code&#39;Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Kubi Code">
    

    
    <meta name="description" content="&amp;#160; &amp;#160; &amp;#160; &amp;#160;由于实验需要在半年前开始接触Scala，之前也学习/使用过TIOBE榜上Top20中一半左右的编程语言，感觉还是Scala给我印象最深，最近没怎么做相关的开发感觉都开始慢慢淡忘了，上周在技术分享时我对Scala作了一些总结，顺便在这里写下。

Scala注意，本文主要是描述我所了解的Scala相关的基础语法，和Java相同得在这里就不再累赘。">
<meta property="og:type" content="article">
<meta property="og:title" content="我眼中的Scala-简洁不简单">
<meta property="og:url" content="http://kubicode.me/2015/04/26/Scala/Scala-In-My-Eyes/index.html">
<meta property="og:site_name" content="Kubi Code'Blog">
<meta property="og:description" content="&amp;#160; &amp;#160; &amp;#160; &amp;#160;由于实验需要在半年前开始接触Scala，之前也学习/使用过TIOBE榜上Top20中一半左右的编程语言，感觉还是Scala给我印象最深，最近没怎么做相关的开发感觉都开始慢慢淡忘了，上周在技术分享时我对Scala作了一些总结，顺便在这里写下。

Scala注意，本文主要是描述我所了解的Scala相关的基础语法，和Java相同得在这里就不再累赘。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我眼中的Scala-简洁不简单">
<meta name="twitter:description" content="&amp;#160; &amp;#160; &amp;#160; &amp;#160;由于实验需要在半年前开始接触Scala，之前也学习/使用过TIOBE榜上Top20中一半左右的编程语言，感觉还是Scala给我印象最深，最近没怎么做相关的开发感觉都开始慢慢淡忘了，上周在技术分享时我对Scala作了一些总结，顺便在这里写下。

Scala注意，本文主要是描述我所了解的Scala相关的基础语法，和Java相同得在这里就不再累赘。">

    
    <link rel="alternative" href="/atom.xml" title="Kubi Code&#39;Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/simpson.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?439f8b724bc712e367d66b5e348997bd";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
      </script>

</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/bart-simpson-09.png" alt="Kubi Code&#39;Blog" title="Kubi Code&#39;Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Kubi Code&#39;Blog">Kubi Code&#39;Blog</a></h1>
				<h2 class="blog-motto">The palest ink is better than the best memory.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/books">Books</a></li>
					
						<li><a href="/favorites">Favorites</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//bing.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:kubicode.me">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/26/Scala/Scala-In-My-Eyes/" title="我眼中的Scala-简洁不简单" itemprop="url">我眼中的Scala-简洁不简单</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Kubi Code" target="_blank" itemprop="author">Kubi Code</a>
		
  <p class="article-time">
    <time datetime="2015-04-26T12:53:19.000Z" itemprop="datePublished"> 发表于 2015-04-26</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#我眼中的Scala"><span class="toc-number">1.</span> <span class="toc-text">我眼中的Scala</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编程IDE"><span class="toc-number">2.</span> <span class="toc-text">编程IDE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变量定义"><span class="toc-number">3.</span> <span class="toc-text">变量定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数定义"><span class="toc-number">4.</span> <span class="toc-text">函数定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变量不变性"><span class="toc-number">5.</span> <span class="toc-text">变量不变性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#控制结构和函数"><span class="toc-number">6.</span> <span class="toc-text">控制结构和函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#加强版的if"><span class="toc-number">6.1.</span> <span class="toc-text">加强版的if</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#带有守卫条件的for"><span class="toc-number">6.2.</span> <span class="toc-text">带有守卫条件的for</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#没有continue、break的while"><span class="toc-number">6.3.</span> <span class="toc-text">没有continue、break的while</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组"><span class="toc-number">7.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类和伴生对象、特质"><span class="toc-number">8.</span> <span class="toc-text">类和伴生对象、特质</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#类"><span class="toc-number">8.1.</span> <span class="toc-text">类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#伴生对象"><span class="toc-number">8.2.</span> <span class="toc-text">伴生对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#接口的加强版-特质"><span class="toc-number">8.3.</span> <span class="toc-text">接口的加强版-特质</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#柯里化"><span class="toc-number">9.</span> <span class="toc-text">柯里化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模式匹配和样例类"><span class="toc-number">10.</span> <span class="toc-text">模式匹配和样例类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#模式匹配"><span class="toc-number">10.1.</span> <span class="toc-text">模式匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#样例类"><span class="toc-number">10.2.</span> <span class="toc-text">样例类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Actor"><span class="toc-number">11.</span> <span class="toc-text">Actor</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#隐式转换"><span class="toc-number">12.</span> <span class="toc-text">隐式转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#还有还有"><span class="toc-number">13.</span> <span class="toc-text">还有还有</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考"><span class="toc-number">14.</span> <span class="toc-text">参考</span></a></li></ol>
		
		</div>
		
		<p>&#160; &#160; &#160; &#160;由于实验需要在半年前开始接触<code>Scala</code>，之前也学习/使用过<a href="http://www.tiobe.com/content/paperinfo/tpci/tpci_definition.htm" target="_blank" rel="external">TIOBE</a>榜上Top20中一半左右的编程语言，感觉还是<code>Scala</code>给我印象最深，最近没怎么做相关的开发感觉都开始慢慢淡忘了，上周在技术分享时我对<code>Scala</code>作了一些总结，顺便在这里写下。</p>
<blockquote>
<p><code>Scala</code>注意，本文主要是描述我所了解的<code>Scala</code>相关的基础语法，和<code>Java</code>相同得在这里就不再累赘。</p>
</blockquote>
<h2 id="我眼中的Scala">我眼中的Scala</h2><pre><code><span class="keyword">Scala</span>是一种基于JVM的编程语言，集成了面向对象和函数式编程的特性，既能处理脚本化得临时任务，又能处理高并发场景下分布式大数据应用。
</code></pre><p>&#160; &#160; &#160; &#160;<code>Java</code>就是因为有<code>JVM</code>虚拟机才成就了现在的辉煌，<code>Scala</code>同样是运行在<code>JVM</code>，大致可以看做Java的升级版，由于现在大数据大势所趋，各种大数据框架的出现导致了<code>Scala</code>强势崛起！<br>&#160; &#160; &#160; &#160;编程初学者最先接触的应该就是”Hello,World”，而WordCount可以看做大数据编程的入门必学技能，所以现在我们在”Hello,World”上实现CharCount：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Scala Application</span></span><br><span class="line"><span class="function"><span class="keyword">val</span> <span class="title">str=</span>"<span class="title">Hello</span>,<span class="title">wrold</span>"</span><br><span class="line"></span><span class="function"><span class="keyword">val</span> <span class="title">data=str</span></span><br><span class="line"></span>	.split(<span class="type">Array</span>(',',' '))</span><br><span class="line">	.flatMap(<span class="keyword">for</span>(c&lt;-_) <span class="keyword">yield</span> (c,<span class="number">1</span>))  <span class="comment">//好Api</span></span><br><span class="line">	.groupBy(_._1)</span><br><span class="line">	.mapValues(_.size)</span><br><span class="line">		</span><br><span class="line">println(data)</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>&#160; &#160; &#160; &#160;假如你是用<code>Java</code>程序来写，最方便的莫过于<code>HashMap</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Java Application</span></span><br><span class="line">String str=<span class="string">"Hello,World"</span>;</span><br><span class="line">HashMap&lt;Character,Integer&gt; map=<span class="keyword">new</span> HashMap&lt;Character,Integer&gt;();</span><br><span class="line"><span class="keyword">for</span>(Character ch:str.toCharArray())</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(!<span class="string">","</span>.equals(ch))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(!map.containsKey(ch))</span><br><span class="line">		&#123;</span><br><span class="line">			map.put(ch, <span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		map.put(ch, map.get(ch)+<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(map);</span><br></pre></td></tr></table></figure></p>
<p>其结果为</p>
<pre><code><span class="built_in">Map</span>(e <span class="subst">-&gt; </span><span class="number">1</span>, l <span class="subst">-&gt; </span><span class="number">3</span>, H <span class="subst">-&gt; </span><span class="number">1</span>, r <span class="subst">-&gt; </span><span class="number">1</span>, w <span class="subst">-&gt; </span><span class="number">1</span>, o <span class="subst">-&gt; </span><span class="number">2</span>, d <span class="subst">-&gt; </span><span class="number">1</span>)
</code></pre><p>从上面的程序中看出<code>Scala</code>的几大特点：</p>
<ul>
<li>链式操作</li>
<li>变量不变性</li>
<li>丰富的Api</li>
<li><strong>简洁不简单</strong>(<em>不需要加分号，返回值时不需要return关键字，还有强大的语法糖</em>)</li>
</ul>
<p>现在已经有非常多优秀的项目都是使用<code>Scala</code>来编写的：</p>
<ul>
<li><a href="http://spark.apache.org/" target="_blank" rel="external">Spark</a>：不用多说，感觉最近<code>Scala</code>的崛起就是因为该项目的横空出世</li>
<li><a href="http://akka.io/" target="_blank" rel="external">Akka</a>：分布式、高并发、高可伸缩性的消息驱动模型</li>
<li><a href="http://akka.io/" target="_blank" rel="external">Kafka</a>：一个高吞吐量的分布式消息系统</li>
<li><a href="https://www.playframework.com/" target="_blank" rel="external">play</a>：一个高性能的Web框架，据说最近版本用Scala重写了</li>
<li>据说Twitter公司好多中间件都是使用Scala来编写的</li>
</ul>
<h2 id="编程IDE">编程IDE</h2><p>&#160; &#160; &#160; &#160;目前编写<code>Scala</code>程序有两种比较流行的IDE：<a href="http://scala-ide.org/" target="_blank" rel="external">Eclipse for Scala</a>、<a href="http://www.jetbrains.com/idea/download/" target="_blank" rel="external">idea community edition</a>，注意，eclipse版感觉功能没idea强，但是速度要比idea快（可能是自己电脑配置差的原因），还有下载idea时要下载社区版，他是免费的。<br>&#160; &#160; &#160; &#160;当然如果是初学者的话还是建议使用万能sublime text来写，自己添加一个插件就好。Tools-&gt;Build System-&gt;New Build System…，然后输入：</p>
<pre><code>{
    "<span class="attribute">cmd</span>": <span class="value">[<span class="string">"scala"</span>,<span class="string">"$file"</span>]</span>,
    "<span class="attribute">selector</span>": <span class="value">[<span class="string">"source.scala"</span>]</span>,
    "<span class="attribute">shell</span>": <span class="value"><span class="string">"true"</span>
</span>}
</code></pre><p>这样<code>Scala</code>后缀的程序在Sublime中直接使用<code>Ctrl+B</code>即可运行</p>
<h2 id="变量定义">变量定义</h2><blockquote>
<p>标准格式：{val|var} 变量名[:类型]=[new]Class</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">val a=<span class="number">5</span>   <span class="comment">//推断为Int类型</span></span><br><span class="line">val b:Int=<span class="number">5</span>  <span class="comment">//显示的指定为Int类型</span></span><br><span class="line">val c=<span class="number">5f</span>  <span class="comment">//表示Float类型</span></span><br><span class="line">val str:Option[String]  <span class="comment">//表示可空类型</span></span><br></pre></td></tr></table></figure>
<h2 id="函数定义">函数定义</h2><blockquote>
<p>标准格式：def 方法名(参数列表)[:返回类型]={//方法体}</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">////推断返回String</span></span><br><span class="line"><span class="function">def <span class="title">hello</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	<span class="string">"Hello"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定返回类型</span></span><br><span class="line"><span class="function">def <span class="title">hello</span><span class="params">()</span>:String</span>=</span><br><span class="line">&#123;</span><br><span class="line">	<span class="string">"Hello"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//简写</span></span><br><span class="line"><span class="function">def <span class="title">hello</span><span class="params">()</span>:String</span>=<span class="string">"Hello"</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">//传参数，多个用逗号隔开</span></span><br><span class="line"><span class="function">def <span class="title">hello</span><span class="params">(word:String)</span>:String</span>=<span class="string">"Hello"</span>+word</span><br><span class="line"></span><br><span class="line"><span class="comment">//注意函数返回时不需要写return</span></span><br></pre></td></tr></table></figure>
<h2 id="变量不变性">变量不变性</h2><p><code>Scala</code>编程最为推崇的就是变量不变性：变量一旦定义了之后不再改变</p>
<ul>
<li>符合大数据的思想，比如分布式文件系统上只能进行增和删除操作，并没有修改操作</li>
<li>在多线程环境下这个变量是安全的</li>
</ul>
<p>在<code>Scala</code>中有两种类型的不变性</p>
<ul>
<li><code>val</code> vs <code>var</code></li>
</ul>
<p>如果用<code>val</code>定义之后这个变量则不能再被其他变量进行赋值，但是可以对其内容进行修改，<code>val</code>定义的变量就没有这个限制。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.collection.mutable.Map  <span class="comment">//显示得先导入可变的Map包</span></span><br><span class="line"></span><br><span class="line">val a=<span class="number">5</span></span><br><span class="line">a=<span class="number">6</span> <span class="comment">//则会报错：reassignment to val</span></span><br><span class="line"><span class="comment">//如果a用var定义则无影响</span></span><br><span class="line"></span><br><span class="line">val map=Map(<span class="number">1</span>-&gt;<span class="number">2</span>)</span><br><span class="line">map.put(<span class="number">2</span>,<span class="number">3</span>) <span class="comment">//这里是修改了变量的内容</span></span><br><span class="line">map.foreach(println(<span class="number">_</span>)) <span class="comment">//会输出(2,3),(1,2)</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>immutable</code> vs <code>mutable</code></li>
</ul>
<p>如果定义的变量属于<code>immutable</code>包，则定义之后该变量的内容再不能再被修改（不显式导入默认为该包下的类型），<code>mutable</code>包下面的类则无此限制。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">val immap=Map(<span class="number">1</span>-&gt;<span class="number">2</span>)<span class="comment">//默认为immutable包下面的类</span></span><br><span class="line">immap.put(<span class="number">2</span>,<span class="number">3</span>) <span class="comment">//这里是修改了变量的内容 ，但是会报错 value put is not a member of scala.collection.immutable.Map</span></span><br><span class="line"></span><br><span class="line">val map=scala.collection.mutable.Map(<span class="number">1</span>-&gt;<span class="number">2</span>) <span class="comment">//显式指定包</span></span><br><span class="line">map.put(<span class="number">2</span>,<span class="number">3</span>) <span class="comment">//可以正常执行</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>val x=scala.collection.mutable.Type()</code>可以理解为指针常量，指向的地址不可以重新赋值，但内容可以改变<br><code>var x=scala.collection.immutable.Type()</code>可以理解为常量指针，指向的地址可以变，但内容不可以重新赋值</p>
</blockquote>
<h2 id="控制结构和函数">控制结构和函数</h2><h3 id="加强版的if">加强版的if</h3><p><code>if</code>除了正常的逻辑判断外，还可以直接返回相应的值，并且还支持返回不同类型的值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">val a=<span class="keyword">if</span>(<span class="keyword">false</span>) <span class="number">1</span> <span class="keyword">else</span> <span class="string">"2"</span></span><br><span class="line">a match&#123;</span><br><span class="line">	<span class="keyword">case</span> x:Int=&gt;println(<span class="string">"Int"</span>)  <span class="comment">//true时a=1</span></span><br><span class="line">	<span class="keyword">case</span> x:String=&gt;println(<span class="string">"String"</span>) <span class="comment">//false时a="2"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>该功能在实际编程中灰常有用，之前写Java的时候都不得不在if外先定义变量，再在里面赋值-_-</p>
</blockquote>
<h3 id="带有守卫条件的for">带有守卫条件的for</h3><p>守卫是什么东东？你可以理解为<code>for</code>里面的条件控制<br>先来看下<code>Scala</code>的<code>for</code>循环（与传统的三层for结构大不相同，不过与传统的foreach有点类似）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i&lt;-<span class="number">0</span> until <span class="number">5</span>) println(i) <span class="comment">//可以输出0,1,2,3,4</span></span><br></pre></td></tr></table></figure>
<p>那如果我需要双重循环呢?<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i&lt;-<span class="number">0</span> to <span class="number">5</span>;j&lt;-i+<span class="number">1</span> to <span class="number">5</span>) println(i*j) <span class="comment">//大致就是5*5下三角的矩阵相乘值</span></span><br></pre></td></tr></table></figure></p>
<p>再来看一下守卫<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i&lt;-<span class="number">0</span> to <span class="number">5</span>;<span class="keyword">if</span> i%<span class="number">2</span>==<span class="number">0</span>) println(i) <span class="comment">//输出0,2,4</span></span><br></pre></td></tr></table></figure></p>
<p>这个守卫表示只有<code>i%2==0</code>的情况下才会进入循环体，这样是不是很方便。</p>
<h3 id="没有continue、break的while">没有continue、break的while</h3><p>这个我就不吐槽了，<code>Scala</code>作者竟然认为<code>continue</code>、<code>break</code>这两个这么顺手控制循环的功能是没用的，完全可以在守卫中加入条件判断来控制，这叫我们这帮C系狗情何以堪-_-</p>
<h2 id="数组">数组</h2><p>数组作为绝大多数编程语言中的一个经典类型，在<code>Scala</code>是不支持<code>[]</code>这种定义的，而是用<code>Array</code>来定义。</p>
<blockquote>
<p>标准格式：[val|var] 变量名[:Array[数组类型]]=Array(…)|new Array(..)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">val array:Array[Int]=<span class="keyword">new</span> Array[Int](<span class="number">5</span>)</span><br><span class="line">println(<span class="string">"array.length="</span>+array.length)  <span class="comment">//输出长度为5</span></span><br><span class="line"></span><br><span class="line">val array2=Array(<span class="string">"Mary"</span>,<span class="string">"had"</span>,<span class="string">"a"</span>,<span class="string">"little"</span>,<span class="string">"cat"</span>) <span class="comment">//直接按内容进行初始化</span></span><br><span class="line">println(array2.mkString(<span class="string">"#"</span>))<span class="comment">//</span></span><br><span class="line">println(<span class="string">"the index is 2="</span>+array2(<span class="number">3</span>))<span class="comment">//取索引为3的值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">val array3:Array[(String,Int)]=Array((<span class="string">"xiaoming"</span>,<span class="number">23</span>),(<span class="string">"xiaohong"</span>,<span class="number">22</span>))<span class="comment">//使用元祖作为数组内容</span></span><br><span class="line">array3.foreach(println(<span class="number">_</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">val matrix =Array.ofDim[Double](<span class="number">3</span>,<span class="number">4</span>)<span class="comment">//定义二维数组</span></span><br></pre></td></tr></table></figure>
<h2 id="类和伴生对象、特质">类和伴生对象、特质</h2><h3 id="类">类</h3><blockquote>
<p>定义：class 类名(构造参数列表) extends,with 继承的类或者接口</p>
</blockquote>
<p>与其他的面向对眼语言不同，<code>Scala</code>中的类支持直接在类名后跟随构造函数列表</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class Person(name:String)&#123;</span><br><span class="line"></span><br><span class="line">	private var age:Int=0;</span><br><span class="line"></span><br><span class="line">	def this(name:String,age:Int)</span><br><span class="line">	&#123;</span><br><span class="line">		this(name);//一定要调用上一层的构造函数</span><br><span class="line">		this.age=age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	def getName=this.name//函数如果无参 可以去掉括号</span><br><span class="line"></span><br><span class="line">	def getAge=this.age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">val p1=new Person("tom")</span><br><span class="line">println(p1.getName)</span><br><span class="line">val p2=new Person("tom",25)</span><br><span class="line">println(p2.getAge)</span><br></pre></td></tr></table></figure>
<h3 id="伴生对象">伴生对象</h3><p>类没有静态方法或者静态字段，需要用<code>Object</code>这个语法结构来达到同样的目的，一个<code>Object</code>一般与对应的类要在同一个文件中（通过<code>Object</code>就可以实现传说中的不用<code>new</code>关键词来实例化对象）</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class Student(name:String)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	def getName()=name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">object Student&#123;</span><br><span class="line"></span><br><span class="line">	//这个伴生对象可以和他的class共享变量</span><br><span class="line">	def apply(name:String):Student=</span><br><span class="line">	&#123;</span><br><span class="line">		new Student(name)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">val stu1=new Student("tom");</span><br><span class="line">println(stu1.getName)</span><br><span class="line">val stu2=Student("peter");//这里其实是调用了Object的apply方法  </span><br><span class="line">println(stu2.getName)</span><br></pre></td></tr></table></figure>
<p>啥都不是说了，没有<code>static</code>是有点奇怪，但是这个<code>Object</code>也不错啊，用习惯就好了(^_^)</p>
<h3 id="接口的加强版-特质">接口的加强版-特质</h3><p>当然<code>Scala</code>里面也是没有<code>Interface</code>这种东西的，而是用<code>trait</code>特质来代替，这个特质类似接口，但是他可以自己实现方法（惊呆了,-_-），这样一来<code>Scala</code>就支持传说中的多继承了，关于多继承里面的菱形问题<code>Scala</code>是通过最后一个相同名称的方法来解决的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">trait Logger&#123;</span><br><span class="line">	<span class="function">def <span class="title">log</span><span class="params">(msg:String)</span></span>&#123;&#125;<span class="comment">//直接在特质里面实现了方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">trait ConsoleLogger extends Logger &#123;</span><br><span class="line">	<span class="function">override def <span class="title">log</span><span class="params">(msg:String)</span></span><br><span class="line">	</span>&#123;</span><br><span class="line">		println(msg)<span class="comment">//特质之间能直接继承</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用width来实现多继承</span></span><br><span class="line"><span class="comment">//class ConsoleLogger extends Logger with Cloneable with Serializable</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Account</span></span>&#123;</span><br><span class="line">	<span class="keyword">protected</span> var balance:Double=<span class="number">100</span></span><br><span class="line">	def getBalance=balance</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//关于Scala的多继承就是通过继承特征来实现的  with trait 可以一下下去</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SaveingsAccount</span> <span class="keyword">extends</span> <span class="title">Account</span> <span class="title">with</span> <span class="title">Logger</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	<span class="function">def <span class="title">withdraw</span><span class="params">(amount:Double)</span></span><br><span class="line">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(amount&gt;balance)</span><br><span class="line">		&#123;</span><br><span class="line">			log(<span class="string">"amount&gt;balance,can't withdraw"</span>)</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			log(<span class="string">"withdraw"</span>+amount)</span><br><span class="line">			balance-=amount;</span><br><span class="line">		&#125;</span><br><span class="line">			</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">println(<span class="string">"s111111111"</span>)</span><br><span class="line">val s=<span class="keyword">new</span> SaveingsAccount();</span><br><span class="line">s.withdraw(<span class="number">101</span>);</span><br><span class="line">s.withdraw(<span class="number">34</span>);</span><br><span class="line">println(<span class="string">"remain"</span>+s.getBalance)</span><br><span class="line"></span><br><span class="line">println(<span class="string">"\r\ns222222222"</span>)</span><br><span class="line">val s2=<span class="keyword">new</span> SaveingsAccount() with ConsoleLogger;<span class="comment">//这个with其实是可以写到SaveingsAccount类上面的，写在这里只是为了说明Scala的灵活，实在是太灵活了。。</span></span><br><span class="line">s2.withdraw(<span class="number">101</span>);</span><br><span class="line">s2.withdraw(<span class="number">34</span>);</span><br><span class="line">println(<span class="string">"remain"</span>+s2.getBalance)</span><br></pre></td></tr></table></figure>
<p>输出的结果为：</p>
<pre><code>s111111111
remain66.0

s222222222
amount&gt;balance,can<span class="operator">'</span>t withdraw
withdraw34.0
remain66.0
</code></pre><h2 id="柯里化">柯里化</h2><blockquote>
<p>可以将函数的参数列表使用多个括号分类来调用（在其他地方没见过吧~^_^）</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">def <span class="title">mul</span><span class="params">(x:Int,y:Int)</span></span>=x*y  <span class="comment">//普通青年</span></span><br><span class="line"><span class="function">def <span class="title">mulOneAtATime</span><span class="params">(x:Int)</span></span>=(y:Int)=&gt;x*y  <span class="comment">//2B青年  </span></span><br><span class="line"><span class="function">def <span class="title">mulSample</span><span class="params">(x:Int)</span><span class="params">(y:Int)</span><span class="params">(z:Int)</span></span>=x*y*z<span class="comment">//文艺青年</span></span><br><span class="line"></span><br><span class="line">val x=<span class="number">5</span></span><br><span class="line">val y=<span class="number">6</span></span><br><span class="line">println(<span class="string">"mul"</span>,mul(x,y))</span><br><span class="line">println(<span class="string">"mulOneAtATime"</span>,mulOneAtATime(x)(y))</span><br><span class="line">println(<span class="string">"mulSample"</span>,mulSample(x)(y)(<span class="number">10</span>))</span><br></pre></td></tr></table></figure>
<p>一般我们在一个函数中如果需要传的参数可以分为几个类别，这样使用柯里化可以让整个函数的调用更加清晰一点。（恩，的确也是）</p>
<h2 id="模式匹配和样例类">模式匹配和样例类</h2><h3 id="模式匹配">模式匹配</h3><blockquote>
<p>模式匹配<code>match</code>是一个更好的<code>switch</code></p>
</blockquote>
<p><code>Scala</code>的<code>match</code>除了可以匹配确定值以外，他还有：</p>
<ul>
<li>可以匹配数组、元祖、样例类等</li>
<li>可以在匹配时加入守卫（就是匹配的判断条件啦^_^）</li>
<li>可以在模式匹配之后进行值的返回</li>
<li>不会有意外掉落到下一个分支问题（也就是没有<code>break</code>）</li>
<li>如果得不到匹配会跑出异常，所以如果不确保能全部覆盖匹配则再最后用<code>_</code>占位符来匹配所有情况</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">val ch:Char=<span class="string">'-'</span></span><br><span class="line">val sign=<span class="number">5</span>;</span><br><span class="line">val result =ch match&#123;<span class="comment">//有返回值</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">'+'</span>=&gt;sign+<span class="number">1</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">'-'</span>=&gt;sign-<span class="number">1</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">_</span>=&gt;sign</span><br><span class="line">&#125;</span><br><span class="line">println(result)</span><br><span class="line"></span><br><span class="line"><span class="comment">//进行是否大于5的判断</span></span><br><span class="line">val flag=<span class="number">5</span></span><br><span class="line">flag match&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">_</span> <span class="keyword">if</span> flag&gt;<span class="number">5</span>=&gt;println(<span class="string">"&gt;5"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="number">_</span> <span class="keyword">if</span> flag&lt;<span class="number">5</span>=&gt;println(<span class="string">"&lt;5"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="number">_</span> =&gt;println(flag)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用类型来进行匹配</span></span><br><span class="line">val obj=<span class="keyword">if</span>(<span class="keyword">false</span>) <span class="number">5</span> <span class="keyword">else</span> <span class="string">"5"</span></span><br><span class="line">obj match&#123;</span><br><span class="line">	<span class="keyword">case</span> obj:Int=&gt;println(<span class="string">"i am Int"</span>)</span><br><span class="line">	<span class="keyword">case</span> obj:String=&gt;println(<span class="string">"i am String"</span>)</span><br><span class="line">	<span class="keyword">case</span> obj:BigInt=&gt;println(<span class="string">"i am bigint"</span>)</span><br><span class="line">	<span class="keyword">case</span> <span class="number">_</span>=&gt;println(<span class="string">"i am any"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//匹配数组</span></span><br><span class="line">val arr=Array(<span class="number">0</span>,<span class="number">7</span>)</span><br><span class="line">arr match&#123;</span><br><span class="line">	<span class="function"><span class="keyword">case</span> <span class="title">Array</span><span class="params">(<span class="number">0</span>)</span></span>=&gt;println(<span class="string">"0"</span>) <span class="comment">//匹配只有一个0的数组</span></span><br><span class="line">	<span class="function"><span class="keyword">case</span> <span class="title">Array</span><span class="params">(x,y)</span></span>=&gt;println(x+<span class="string">"+"</span>+y)  <span class="comment">//匹配含有两个元素的数组</span></span><br><span class="line">	<span class="function"><span class="keyword">case</span> <span class="title">Array</span><span class="params">(<span class="number">0</span>,_*)</span></span>=&gt;println(<span class="string">"start 0"</span>) <span class="comment">//匹配以0为第一个元素的数组</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">_</span>=&gt;println(<span class="string">"any"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//匹配元组</span></span><br><span class="line">val tuple=(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">tuple match&#123;</span><br><span class="line">	<span class="keyword">case</span> (<span class="number">_</span>,<span class="number">2</span>)=&gt;println(<span class="string">"end2"</span>)<span class="comment">//匹配以2结尾的元组</span></span><br><span class="line">	<span class="keyword">case</span> (<span class="number">1</span>,<span class="number">_</span>)=&gt;println(<span class="string">"start 1"</span>)<span class="comment">//匹配以1开头的元组</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">_</span>=&gt;println(<span class="string">"nothing"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>PS:功能很强大吧，在<code>Scala</code>的程序里面随处都可以看到<code>match</code>，甚至很多情况下使用<code>match</code>来完成<code>if-else</code>的操作</p>
</blockquote>
<h3 id="样例类">样例类</h3><blockquote>
<p>样例类是一种特殊的类，它们经过优化以被用于模式匹配</p>
</blockquote>
<p>你可以把样例类看做一个结构体，里面定义数据类型，然后在<code>match</code>操作的时候得以方便得传参</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">abstract class Amount  //定义一个抽象类</span><br><span class="line">case class Dollar(value:Double) extends Amount  //定义一个美元得样例类 继承了Amount</span><br><span class="line">case class Currency(value:Double,unit:String) extends Amount  //顶一个现金的抽象类  也是继承了Amount</span><br><span class="line"></span><br><span class="line">case object Nothing extends Amount</span><br><span class="line"></span><br><span class="line">val amt:Amount=Currency(6,"$") //实例化一个样例类 注意没有new</span><br><span class="line">amt match&#123;//使用样例类进行模式匹配</span><br><span class="line">	case Dollar(x)=&gt;println(x)</span><br><span class="line">	case Currency(value,unit)=&gt;println("oh,i get "+value+unit)//在这里得到了匹配，看到没？可以传参数</span><br><span class="line">	case Nothing=&gt;println("nothing")</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>PS：<code>Scala</code>的框架中样例类也用的特别多，比如说<a href="http://spark.apache.org/" target="_blank" rel="external">Spark</a></p>
</blockquote>
<h2 id="Actor">Actor</h2><blockquote>
<p><code>Actor</code>提供了并发程序中与传统的基于锁结构不同的另一个选择</p>
</blockquote>
<p>他有两种发送消息的方式：</p>
<ul>
<li><code>actor!message</code>:发送消息之后非阻塞的，也没有返回值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.actors.Actor</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HiActor</span> <span class="keyword">extends</span> <span class="title">Actor</span></span>&#123; <span class="comment">//自定义一个actor类，它一定是要继承Actor</span></span><br><span class="line">	<span class="function">def <span class="title">act</span><span class="params">()</span><span class="comment">//重写该方法</span></span><br><span class="line">	</span>&#123;</span><br><span class="line">		<span class="keyword">while</span>(<span class="keyword">true</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			receive &#123;<span class="comment">//在这里接收消息，其实这里就是一个模式匹配</span></span><br><span class="line">				<span class="keyword">case</span> <span class="string">"Hi"</span>=&gt;println(<span class="string">"hello!"</span>)</span><br><span class="line">				<span class="keyword">case</span> <span class="string">"Goodbye"</span>=&gt;println(<span class="string">"bye bye!"</span>)</span><br><span class="line">				<span class="keyword">case</span> <span class="number">_</span> =&gt;println(<span class="string">"i don't know"</span>)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">val act=<span class="keyword">new</span> HiActor</span><br><span class="line">act.start <span class="comment">//一定要启动之后才能发送</span></span><br><span class="line"></span><br><span class="line">println(<span class="string">"send Hi"</span>)</span><br><span class="line">act!<span class="string">"Hi"</span></span><br><span class="line">println(<span class="string">"send Goodbye"</span>)</span><br><span class="line">act!<span class="string">"Goodbye"</span></span><br></pre></td></tr></table></figure>
<p>这样就会输出</p>
<pre><code>send Hi
send Goodbye
hello!
<span class="built_in">bye</span> <span class="built_in">bye</span>!
</code></pre><ul>
<li><code>actor!?message</code>:发送消息之后会阻塞下面代码的执行，而且还是可以得到返回值的</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.actors.Actor</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AccountActor</span> <span class="keyword">extends</span> <span class="title">Actor</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> var balance=<span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">	def getBalance=<span class="function">balance</span><br><span class="line">	def <span class="title">act</span><span class="params">()</span></span><br><span class="line">	</span>&#123;</span><br><span class="line">		<span class="keyword">while</span>(<span class="keyword">true</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//使用样例类来进行匹配</span></span><br><span class="line">			receive &#123;</span><br><span class="line">				<span class="function"><span class="keyword">case</span> <span class="title">Desposit</span><span class="params">(amount)</span></span>=&gt;</span><br><span class="line">					println(<span class="string">"Desposit "</span>+amount)</span><br><span class="line">					balance+=amount</span><br><span class="line">					sender!<span class="function"><span class="keyword">true</span></span><br><span class="line">				<span class="keyword">case</span> <span class="title">WidthDraw</span><span class="params">(amount)</span></span>=&gt;</span><br><span class="line">					<span class="keyword">if</span>(balance&lt;amount)</span><br><span class="line">					&#123;</span><br><span class="line">						println(<span class="string">"the balance less than amount"</span>)</span><br><span class="line">						sender!<span class="keyword">false</span></span><br><span class="line">					&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">						println(<span class="string">"WidthDraw"</span>+amount)</span><br><span class="line">						balance-=amount</span><br><span class="line">						sender!<span class="keyword">true</span></span><br><span class="line">					&#125;	</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">case</span> class <span class="title">Desposit</span><span class="params">(amount:Double)</span>  <span class="comment">//存钱的样例类</span></span><br><span class="line"><span class="keyword">case</span> class <span class="title">WidthDraw</span><span class="params">(amount:Double)</span> <span class="comment">//取钱的样例类</span></span><br><span class="line"></span><br><span class="line">val account</span>=<span class="keyword">new</span> AccountActor</span><br><span class="line">account.start</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 如果使用非阻塞的，整个存取钱的系统会不正常</span><br><span class="line">println(account!WidthDraw(100))</span><br><span class="line">println(account!Desposit(100))</span><br><span class="line">println(account!WidthDraw(50))</span><br><span class="line">println("account.getBalance"+account.getBalance)*/</span></span><br><span class="line"></span><br><span class="line">println(account!?WidthDraw(<span class="number">100</span>))<span class="comment">//取100  会说钱不够，没法取</span></span><br><span class="line">println(account!?Desposit(<span class="number">100</span>))<span class="comment">//存100</span></span><br><span class="line">println(account!?WidthDraw(<span class="number">50</span>))<span class="comment">//再取50</span></span><br><span class="line">println(<span class="string">"account.getBalance"</span>+account.getBalance)<span class="comment">//可以正常取钱</span></span><br></pre></td></tr></table></figure>
<p>输出的结果为：</p>
<pre><code><span class="keyword">the</span> balance <span class="keyword">less than</span> amount
<span class="constant">false</span>
Desposit <span class="number">100.0</span>
<span class="constant">true</span>
WidthDraw50.0
<span class="constant">true</span>
account.getBalance50.0
</code></pre><blockquote>
<p>PS:大名鼎鼎的<code>AKKA</code>就是基于<code>Actor</code>来实现的，是分布式、高并发的消息驱动框架（听听就是高大上~^_^）</p>
</blockquote>
<h2 id="隐式转换">隐式转换</h2><p>你知否曾希望某个类有某个方法，而这个类的作者却没有提供你？</p>
<blockquote>
<p>所谓隐式转换函数指的是那种以<code>implicit</code>关键字声明的带有单个参数的函数。</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//定义一个现金转换类</span><br><span class="line">class Currency(val value:Double)&#123;</span><br><span class="line">	def $2y=value*6 //美元转人民币</span><br><span class="line">	def y2$=value/6 //人民币转美元</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//普通用法就是需要自己去实例化一个Currency类再去</span><br><span class="line">val money=new Currency(100.0)</span><br><span class="line">println(money.$2y) //执行去转换的方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//这里使用隐式转换</span><br><span class="line">implicit def double2Currency(value:Double)=new Currency(value)</span><br><span class="line">println(100.$2y)//就可以直接在数字上使用该现金转换的方法了</span><br><span class="line">//A：有同学可能要问了，这不是double转为Currency的嘛？怎么Int类型也能用？</span><br><span class="line">//Q：不错，100是Int类型，但是这里默认是带有Int 转 Double的隐式转换</span><br></pre></td></tr></table></figure>
<p>在使用隐式转换时只需要确保调用之前 已经直接了定义的隐式转换方法即可，而且一般定义转换名称为<code>元类型2目标类型</code>，这样比较好记啊(^_^)</p>
<blockquote>
<p>Note:在Scala编写框架时他的功能类往往不会直接暴露出来，而是通过隐式转换的方式来让用调用 （这点可以让你的框架代码结构非常清晰，但是。。。你要看源码实际调用类的时候就很难找到了）</p>
</blockquote>
<h2 id="还有还有">还有还有</h2><ul>
<li>元组：这不是元祖月饼-_-，接触过<code>Python</code>的同学应该都知道吧</li>
<li><code>List,Map,etc</code>的集合类</li>
<li>万能占位符<code>_</code>，懒人模式用的，因为有时候懒得想变量</li>
<li><code>lazy</code> 懒加载，在调用的时候才会加载。。明显有好处嘛^_^</li>
<li>用索引取值一般用圆括号<code>(i)</code>，定义变量类型、泛型一般用方括号<code>[K,V]</code></li>
<li>其他的好也好多都不熟悉了 -_-</li>
</ul>
<h2 id="参考">参考</h2><ul>
<li>《快学Scala》</li>
<li>《Scala编程-中文版》</li>
<li><a href="http://www.scala-lang.org/" target="_blank" rel="external">Scala</a></li>
</ul>
<hr>
<blockquote>
<p>本作品采用<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/cn/" target="_blank">[知识共享署名-非商业性使用-相同方式共享 2.5]</a>中国大陆许可协议进行许可，我的博客欢迎复制共享，但在同时，希望保留我的署名权<a href="http://kubicode.me/" target="_blank" rel="external">kubiCode</a>，并且，不得用于商业用途。如您有任何疑问或者授权方面的协商，请给<a href="http://kubicode.me/about/" target="_blank" rel="external">我留言</a>。</p>
</blockquote>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Scala/">Scala</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Scala/">Scala</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://kubicode.me/2015/04/26/Scala/Scala-In-My-Eyes/" data-title="我眼中的Scala-简洁不简单 | Kubi Code&#39;Blog" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/05/03/Effective Java/The-Methods-General-To-All-Object/" title="《Effective Java》第三章：对于所有对象都通用的方法">
  <strong>上一篇：</strong><br/>
  <span>
  《Effective Java》第三章：对于所有对象都通用的方法</span>
</a>
</div>


<div class="next">
<a href="/2015/04/22/Effective Java/Create-Destory-Object/"  title="《Effective Java》第二章：创建和销毁对象">
 <strong>下一篇：</strong><br/> 
 <span>《Effective Java》第二章：创建和销毁对象
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2015/04/26/Scala/Scala-In-My-Eyes/" data-title="我眼中的Scala-简洁不简单" data-url="http://kubicode.me/2015/04/26/Scala/Scala-In-My-Eyes/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#我眼中的Scala"><span class="toc-number">1.</span> <span class="toc-text">我眼中的Scala</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编程IDE"><span class="toc-number">2.</span> <span class="toc-text">编程IDE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变量定义"><span class="toc-number">3.</span> <span class="toc-text">变量定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数定义"><span class="toc-number">4.</span> <span class="toc-text">函数定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变量不变性"><span class="toc-number">5.</span> <span class="toc-text">变量不变性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#控制结构和函数"><span class="toc-number">6.</span> <span class="toc-text">控制结构和函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#加强版的if"><span class="toc-number">6.1.</span> <span class="toc-text">加强版的if</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#带有守卫条件的for"><span class="toc-number">6.2.</span> <span class="toc-text">带有守卫条件的for</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#没有continue、break的while"><span class="toc-number">6.3.</span> <span class="toc-text">没有continue、break的while</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组"><span class="toc-number">7.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类和伴生对象、特质"><span class="toc-number">8.</span> <span class="toc-text">类和伴生对象、特质</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#类"><span class="toc-number">8.1.</span> <span class="toc-text">类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#伴生对象"><span class="toc-number">8.2.</span> <span class="toc-text">伴生对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#接口的加强版-特质"><span class="toc-number">8.3.</span> <span class="toc-text">接口的加强版-特质</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#柯里化"><span class="toc-number">9.</span> <span class="toc-text">柯里化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模式匹配和样例类"><span class="toc-number">10.</span> <span class="toc-text">模式匹配和样例类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#模式匹配"><span class="toc-number">10.1.</span> <span class="toc-text">模式匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#样例类"><span class="toc-number">10.2.</span> <span class="toc-text">样例类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Actor"><span class="toc-number">11.</span> <span class="toc-text">Actor</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#隐式转换"><span class="toc-number">12.</span> <span class="toc-text">隐式转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#还有还有"><span class="toc-number">13.</span> <span class="toc-text">还有还有</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考"><span class="toc-number">14.</span> <span class="toc-text">参考</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Akka/" title="Akka">Akka<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Algorithm/" title="Algorithm">Algorithm<sup>34</sup></a></li>
		  
		
		  
			<li><a href="/categories/Data-Struct/" title="Data Struct">Data Struct<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Dotnet/" title="Dotnet">Dotnet<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/Effective-Java/" title="Effective Java">Effective Java<sup>10</sup></a></li>
		  
		
		  
			<li><a href="/categories/Food/" title="Food">Food<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hadoop/" title="Hadoop">Hadoop<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hexo/" title="Hexo">Hexo<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Java-Base/" title="Java Base">Java Base<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Java-Source/" title="Java Source">Java Source<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/Javascript/" title="Javascript">Javascript<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/LeetCode/" title="LeetCode">LeetCode<sup>25</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/Mac/" title="Mac">Mac<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Machine-Learning/" title="Machine Learning">Machine Learning<sup>22</sup></a></li>
		  
		
		  
			<li><a href="/categories/OSGi/" title="OSGi">OSGi<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/PHP/" title="PHP">PHP<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Python/" title="Python">Python<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Scala/" title="Scala">Scala<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Search-Engine/" title="Search Engine">Search Engine<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Spark/" title="Spark">Spark<sup>5</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Algorithm/" title="Algorithm">Algorithm<sup>37</sup></a></li>
			
		
			
				<li><a href="/tags/Machine-Learning/" title="Machine Learning">Machine Learning<sup>25</sup></a></li>
			
		
			
				<li><a href="/tags/LeetCode/" title="LeetCode">LeetCode<sup>25</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/Search-Engine/" title="Search Engine">Search Engine<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/CSharp/" title="CSharp">CSharp<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/Food/" title="Food">Food<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Hadoop/" title="Hadoop">Hadoop<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Spark/" title="Spark">Spark<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Vim/" title="Vim">Vim<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Scala/" title="Scala">Scala<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Asp-Net/" title="Asp.Net">Asp.Net<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Data-Struct/" title="Data Struct">Data Struct<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/OSGi/" title="OSGi">OSGi<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/pager/" title="pager">pager<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Python/" title="Python">Python<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Mac/" title="Mac">Mac<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Json4s/" title="Json4s">Json4s<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://quanru.github.io/" target="_blank" title="quanru&#39;s Blog">quanru&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://qcl6355.github.io/" target="_blank" title="Sheng Li&#39;s Blog">Sheng Li&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://youngyoungkang.github.io/" target="_blank" title="Young Young Kang&#39;s Blog">Young Young Kang&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://nlpnoob.com/" target="_blank" title="DataKingdom&#39;s Blog">DataKingdom&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="Kubi Code">Kubi Code</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"kubiCode"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['\$','\$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    displayAlign: "center"
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="/js/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>

